<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
  </head>
  <body>
    <canvas id="canvas" width="800" height="800"></canvas>
    <script type="module">
      import init, { Game } from "./pkg/snake.js";

      let game;

      init().then(() => {
        game = Game.new(800, 800);
      });

      document
        .getElementById("canvas")
        .addEventListener("click", () => game && game.turn());

      function render() {
        if (game) {
          game.tick();
          game.render();
        }
        requestAnimationFrame(render);
      }

      requestAnimationFrame(render);
    </script>
  </body>
</html>
