<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>hello-wasm example</title>
  </head>

  <body>
    <canvas
      id="canvas"
      style="width: 320px; height: 320px; image-rendering: pixelated"
    ></canvas>

    <script type="module">
      import init, { Game } from "./pkg/snake.js";

      const canvas = document.getElementById("canvas");

      init().then(() => {
        const game = Game.new();
        canvas.width = Game.width();
        canvas.height = Game.height();
        canvas.addEventListener("click", () => game.turn());
        requestAnimationFrame(() => onFrame(game));
      });

      function onFrame(game) {
        game.tick();
        game.render(canvas.getContext("2d"));
        requestAnimationFrame(() => onFrame(game));
      }
    </script>
  </body>
</html>
